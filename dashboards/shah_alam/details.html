<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Detail Kes</title>
<style>
body{font-family:Arial;padding:20px;}
.card{border:1px solid #ccc;padding:15px;margin-bottom:10px;}
</style>
</head>
<body>

<h2>Detail Aduan</h2>
<div id="result">Loading...</div>

<script>
const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTXBgy7se3-U4mSHdnbZ6YiRYToQEVFtEKuZ_z_RRCby7nYGd-HViMSNexPxFHP2pENCUjkX3ofqqlE/pub?output=csv";

const urlParams = new URLSearchParams(window.location.search);
const caseId = urlParams.get('case_id');

fetch(csvUrl)
.then(r=>r.text())
.then(text=>{
  const rows = text.split('\n').slice(1);
  let found = false;

  rows.forEach(row=>{
    const cols = row.split(',');

    if(cols[0].trim() === caseId.trim()){
      found = true;
      document.getElementById('result').innerHTML = `
        <div class="card">
          <b>Case ID:</b> ${cols[0]}<br>
          <b>Kategori:</b> ${cols[2]}<br>
          <b>Ringkasan:</b> ${cols[3]}<br>
          <b>Status:</b> ${cols[4]}<br>
          <b>Tarikh:</b> ${cols[1]}
        </div>
        <a href="index.html">‚Üê Kembali ke Peta</a>
      `;
    }
  });

  if(!found){
    document.getElementById('result').innerHTML="Kes tidak dijumpai";
  }
});
</script>

</body>
</html>

